# Frappe Setup Guide (Docker/Local)

Frappe Framework can be set up using Docker (recommended) or locally. Here are both options:

## Option 1: Docker Frappe Setup (Recommended)

The easiest way to get Frappe running is using Docker. The project includes a complete Docker setup.

### Quick Start with Docker

1. **Start all Docker services:**
   ```bash
   docker compose up --build -d
   ```

2. **Wait for Frappe to initialize** (takes 3-5 minutes on first startup):
   ```bash
   docker compose logs -f frappe
   ```
   
   Wait until you see: `✅ megatechtrackers app installed!`

3. **Access Frappe:**
   - URL: http://localhost:8000
   - Login: Administrator / admin

4. **API keys**
   - Grafana + Frappe keys are auto-generated by the start script into the repo root `.env`.

### Docker Services Include:
- ✅ Frappe Nginx Proxy + Framework (http://localhost:8000)
- ✅ Grafana Nginx Proxy + Analytics (http://localhost:3000)
- ✅ MariaDB (port 3306)
- ✅ Redis (port 6379)
- ✅ Automatic app installation and migration

For detailed Docker setup, see [docker.md](./docker.md) and [quick-start-docker.md](./quick-start-docker.md).

## Option 2: Local Frappe Installation (Alternative)

### Prerequisites
- Python 3.10+
- Node.js 18+
- MariaDB/MySQL
- Redis

### Installation Steps

1. **Install bench CLI:**
   ```bash
   pip3 install frappe-bench
   ```

2. **Initialize bench:**
   ```bash
   bench init frappe-bench
   cd frappe-bench
   ```

3. **Create site:**
   ```bash
   bench new-site site1.localhost --db-root-password admin --admin-password admin
   ```

4. **Copy megatechtrackers app:**
   ```bash
   cp -r ../frappe_apps/megatechtrackers apps/
   ```

5. **Install app:**
   ```bash
   bench --site site1.localhost install-app megatechtrackers
   bench --site site1.localhost migrate
   ```

6. **Start Frappe:**
   ```bash
   bench start
   ```

7. **API key/secret for integrations (recommended approach)**
   - When using the Docker stack, keys are **auto-provisioned** into the repo root `.env` by `docker-start`.
   - When using local Frappe, you can either:
     - create keys from the UI (**User → API Access**), or
     - generate keys via the server-side method you use in automation (recommended for CI/dev seeding).

### When to Use Local Installation

Use local installation if you:
- Need to debug Frappe app code frequently
- Want to develop custom Frappe features
- Prefer running Frappe directly on your machine

## Quick Start with Docker Services (Without Frappe)

If you want to test Grafana and Next.js services without Frappe:

```bash
# Start only Grafana, Redis, and services
docker compose up grafana redis access-gateway web-app -d
```

Then set up Frappe locally using Option 2 above.

## Testing Without Full Frappe Setup

For initial testing, you can:
1. Start Grafana and services: `docker compose up grafana redis access-gateway web-app -d`
2. Mock Frappe API responses for testing
3. Set up Frappe later when ready
