# ============================================================
# ALARM SERVICE - PROCESSING PIPELINE
# ============================================================

title: Alarm Service - Processing Pipeline
uid: alarm-processing
tags:
- alarm
- processing
- metrics
refresh: 30s
panels:
- title: Total Alarms Processed
  query: alarms_processed_total | Total
  color: '#3274D9'
- title: Alarms/sec (5m avg)
  query: alarms_processed_total
  transform: rate
  unit: ops
  color: '#73BF69'
- title: Emails Sent
  width: 4
  query: email_sent_total | Emails
  color: '#FF9830'
- title: SMS Sent
  width: 4
  query: sms_sent_total | SMS
  color: '#B877D9'
- title: Voice Sent
  width: 4
  query: voice_sent_total | Voice
  color: '#8AB8FF'
- title: Alarm Processing Rate Over Time
  type: timeseries
  query: alarms_processed_total
  transform: rate
  unit: ops
  color: '#3274D9'
- title: Notifications Sent Rate
  type: timeseries
  queries:
  - expr: email_sent_total
    legend: Email/sec
    transform: rate
  - expr: sms_sent_total
    legend: SMS/sec
    transform: rate
  - expr: voice_sent_total
    legend: Voice/sec
    transform: rate
  unit: ops
- title: Processing Duration (P50, P95, P99)
  type: timeseries
  queries:
  - expr: alarm_processing_duration_ms_bucket
    legend: P50
    transform: rate
  - expr: alarm_processing_duration_ms_bucket
    legend: P95
    transform: rate
  - expr: alarm_processing_duration_ms_bucket
    legend: P99
    transform: rate
  unit: ms
  fill_opacity: 10
- title: Errors by Type
  type: timeseries
  queries:
  - expr: email_send_error
    legend: Email Errors
    transform: rate
  - expr: sms_send_error
    legend: SMS Errors
    transform: rate
  - expr: voice_send_error
    legend: Voice Errors
    transform: rate
  - expr: alarm_processing_error
    legend: Processing Errors
    transform: rate
  unit: ops
- title: Queue Depth
  type: timeseries
  queries:
  - rabbitmq_queue_depth | RabbitMQ Queue
  - alarm_queue_size | Internal Queue
  - dlq_size | DLQ
- title: RabbitMQ Processing
  type: timeseries
  queries:
  - expr: rabbitmq_message_received
    legend: Received/sec
    transform: rate
  - expr: rabbitmq_message_acknowledged
    legend: Acked/sec
    transform: rate
  - expr: rabbitmq_messages_processed_rate or vector(0)
    legend: Processing Rate
  unit: ops
