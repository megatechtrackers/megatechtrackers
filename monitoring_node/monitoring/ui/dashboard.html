<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>__DASHBOARD_TITLE__</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="/ui/dashboard.css">
</head>
<body>
    <!-- Mobile Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>
    
    <!-- Mobile Toggle Button -->
    <button class="mobile-toggle" id="mobile-toggle" onclick="toggleSidebar()">
        <svg fill="currentColor" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
        </svg>
    </button>
    
    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">__DASHBOARD_TITLE__</div>
                <div class="sidebar-subtitle">
                    <span class="status-dot healthy" id="status-dot"></span>
                    <span id="status-text">Healthy</span> · Uptime: <span id="uptime">0m</span>
                </div>
            </div>
            
            <div class="sidebar-stats">
                <div class="sidebar-stat">
                    <div class="sidebar-stat-value" id="trackers-count">0</div>
                    <div class="sidebar-stat-label">Trackers Online</div>
                </div>
                <div class="sidebar-stat">
                    <div class="sidebar-stat-value" id="nodes-count">0</div>
                    <div class="sidebar-stat-label">Parser Services</div>
                </div>
            </div>
            
            <div class="node-list-header">Parser Services</div>
            <div class="node-list" id="node-list">
                <div style="padding: 20px; text-align: center; color: var(--text-muted);">Loading...</div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main">
            <div class="main-header">
                <div>
                    <div class="main-title" id="view-title">Fleet Overview</div>
                    <div class="main-meta">Aggregated metrics from all parser services</div>
                </div>
                <div class="data-mode" id="data-mode">
                    <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/></svg>
                    RabbitMQ
                </div>
            </div>
            
            <div class="main-content">
                <!-- Overview View -->
                <div id="overview-view">
                    <div class="overview-grid">
                        <div class="stat-card">
                            <div class="stat-label">Trackers Online</div>
                            <div class="stat-value" id="stat-trackers">0</div>
                            <div class="stat-hint">Currently connected devices</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Connection Attempts</div>
                            <div class="stat-value" id="stat-attempts">0</div>
                            <div class="stat-hint">Total since startup</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Rejected</div>
                            <div class="stat-value" id="stat-rejected">0</div>
                            <div class="stat-hint">Connections refused</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Capacity</div>
                            <div class="stat-value" id="stat-capacity">0</div>
                            <div class="stat-hint">Max concurrent trackers</div>
                        </div>
                    </div>
                    
                    <div class="chart-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <span class="chart-title">Parser Services CPU Usage</span>
                            </div>
                            <div class="chart-container">
                                <canvas id="cpu-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <span class="chart-title">Parser Services Memory Usage</span>
                            </div>
                            <div class="chart-container">
                                <canvas id="memory-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alerts-section">
                        <div class="alerts-title">System Alerts</div>
                        <div id="alerts-container">
                            <div class="alert-ok">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                </svg>
                                All systems operational
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Node Detail View -->
                <div id="node-detail-view" class="node-detail">
                    <div class="detail-header">
                        <button class="detail-back" onclick="showOverview()">← Back</button>
                        <div class="detail-title" id="detail-node-name">Node</div>
                        <span class="detail-badge healthy" id="detail-node-status">Healthy</span>
                    </div>
                    
                    <div class="detail-stats" id="detail-stats"></div>
                    
                    <div class="chart-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <span class="chart-title">CPU Usage Over Time</span>
                            </div>
                            <div class="chart-container">
                                <canvas id="node-cpu-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <span class="chart-title">Memory Usage Over Time</span>
                            </div>
                            <div class="chart-container">
                                <canvas id="node-memory-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    
    <script src="/ui/dashboard.js"></script>
</body>
</html>