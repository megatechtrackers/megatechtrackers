# =============================================================================
# Alarm Node Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the required values
# Required variables: DB_PASSWORD, EMAIL_USER, EMAIL_PASSWORD
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DB_HOST=postgres-primary
DB_PORT=5432
DB_NAME=tracking_db
DB_USER=postgres
DB_PASSWORD=your-database-password-here

# -----------------------------------------------------------------------------
# Redis Configuration (for Rate Limiting)
# -----------------------------------------------------------------------------
# Redis URL for rate limiting and caching
# Format: redis://[password@]host:port[/database]
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# RabbitMQ Configuration
# -----------------------------------------------------------------------------
# RabbitMQ connection URL
# Format: amqp://username:password@host:port/vhost
RABBITMQ_URL=amqp://tracking_user:tracking_password@rabbitmq-lb:5672/tracking_gateway

# RabbitMQ Exchange and Queue Names
RABBITMQ_EXCHANGE=alarm_exchange
RABBITMQ_QUEUE=alarm_notifications
RABBITMQ_DLQ=alarm_notifications_dlq

# RabbitMQ Consumer Prefetch Count (number of unacked messages per consumer)
RABBITMQ_PREFETCH=10

# -----------------------------------------------------------------------------
# Email Configuration (SMTP)
# -----------------------------------------------------------------------------
# SMTP server settings
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false

# SMTP authentication (REQUIRED)
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-password-here

# From address for alarm emails
EMAIL_FROM=noreply@megatechtrackers.com

# Email channel specific settings
EMAIL_MAX_RETRIES=5
EMAIL_MAX_CONCURRENCY=5

# -----------------------------------------------------------------------------
# SMS Configuration
# -----------------------------------------------------------------------------
# SMS API endpoint
SMS_API_URL=https://api.sms-provider.com/send
SMS_API_KEY=your-sms-api-key-here
SMS_FROM=Megatechtrackers

# SMS channel specific settings
SMS_MAX_RETRIES=3
SMS_MAX_CONCURRENCY=5

# -----------------------------------------------------------------------------
# Voice Call Configuration
# -----------------------------------------------------------------------------
# Voice API endpoint (optional)
VOICE_API_URL=
VOICE_API_KEY=
VOICE_FROM=TrackingAlarm

# Voice channel specific settings
VOICE_MAX_RETRIES=2
VOICE_MAX_CONCURRENCY=3

# -----------------------------------------------------------------------------
# Alarm Processing Configuration
# -----------------------------------------------------------------------------
# Polling interval in milliseconds (how often to check for new alarms)
POLL_INTERVAL=5000

# Batch size for processing alarms
BATCH_SIZE=50

# Retry configuration
MAX_RETRIES=3
RETRY_BASE_DELAY=1000
RETRY_MAX_DELAY=60000

# Deduplication window in minutes (prevent duplicate alarms)
DEDUP_WINDOW_MINUTES=5

# Maximum concurrent alarm processing
MAX_CONCURRENCY=10

# Queue depth threshold (alert when queue exceeds this)
QUEUE_DEPTH_THRESHOLD=1000

# -----------------------------------------------------------------------------
# Fallback Contacts (used when device has no configured contacts)
# -----------------------------------------------------------------------------
DEFAULT_ALARM_EMAIL=admin@example.com
DEFAULT_ALARM_PHONE=+1234567890

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: error, warn, info, debug
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Health Check & Server Configuration
# -----------------------------------------------------------------------------
# Health check endpoint port
HEALTH_PORT=3100

# -----------------------------------------------------------------------------
# Node Environment
# -----------------------------------------------------------------------------
# Environment: development, production, test
NODE_ENV=production
