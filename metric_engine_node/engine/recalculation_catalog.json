{
  "_comment": "Plan § 7.7: single source for config→affected metrics and refreshable views. Add new config keys or MVs here; no code change in recalculation_worker.",
  "config_key_affected": {
    "SPEED_LIMIT_CITY": { "event_categories": ["Speed"], "view_names": ["mv_daily_violations", "mv_weekly_driver_scores"] },
    "SPEED_LIMIT_HIGHWAY": { "event_categories": ["Speed"], "view_names": ["mv_daily_violations", "mv_weekly_driver_scores"] },
    "SPEED_LIMIT_MOTORWAY": { "event_categories": ["Speed"], "view_names": ["mv_daily_violations", "mv_weekly_driver_scores"] },
    "MIN_DURATION_SPEED": { "event_categories": ["Speed"], "view_names": ["mv_daily_violations", "mv_weekly_driver_scores"] },
    "TEMP_MIN": { "event_categories": ["Sensor"], "view_names": ["mv_daily_temperature_compliance", "mv_daily_violations"] },
    "TEMP_MAX": { "event_categories": ["Sensor"], "view_names": ["mv_daily_temperature_compliance", "mv_daily_violations"] },
    "HUMIDITY_MIN": { "event_categories": ["Sensor"], "view_names": ["mv_daily_humidity_compliance", "mv_daily_violations"] },
    "HUMIDITY_MAX": { "event_categories": ["Sensor"], "view_names": ["mv_daily_humidity_compliance", "mv_daily_violations"] },
    "SENSOR_DURATION_THRESHOLD": { "event_categories": ["Sensor"], "view_names": ["mv_daily_temperature_compliance", "mv_daily_humidity_compliance"] },
    "SEATBELT_SPEED_THRESHOLD": { "event_categories": ["Seatbelt"], "view_names": ["mv_daily_violations", "mv_daily_compliance"] },
    "SEATBELT_MIN_DURATION": { "event_categories": ["Seatbelt"], "view_names": ["mv_daily_violations", "mv_daily_compliance"] },
    "SEATBELT_MIN_DISTANCE": { "event_categories": ["Seatbelt"], "view_names": ["mv_daily_violations", "mv_daily_compliance"] },
    "SEATBELT_DELAY_THRESHOLD": { "event_categories": ["Seatbelt"], "view_names": ["mv_daily_violations", "mv_daily_compliance"] },
    "HARSH_SPEED_DROP_THRESHOLD": { "event_categories": ["Harsh"], "view_names": ["mv_daily_harsh_events", "mv_weekly_driver_scores"] },
    "HARSH_SPEED_INCREASE_THRESHOLD": { "event_categories": ["Harsh"], "view_names": ["mv_daily_harsh_events", "mv_weekly_driver_scores"] },
    "HARSH_TIME_WINDOW": { "event_categories": ["Harsh"], "view_names": ["mv_daily_harsh_events", "mv_weekly_driver_scores"] },
    "HARSH_HEADING_THRESHOLD": { "event_categories": ["Harsh"], "view_names": ["mv_daily_harsh_events", "mv_weekly_driver_scores"] },
    "FILL_THRESHOLD": { "event_categories": ["Fuel"], "view_names": ["mv_daily_fuel_consumption"] },
    "THEFT_THRESHOLD": { "event_categories": ["Fuel"], "view_names": ["mv_daily_fuel_consumption"] },
    "IDLE_THRESHOLD": { "event_categories": ["Idle"], "view_names": ["mv_hourly_vehicle_stats", "mv_daily_stoppage_stats"] },
    "IDLE_MAX": { "event_categories": ["Idle"], "view_names": ["mv_hourly_vehicle_stats"] },
    "NIGHT_START": { "event_categories": [], "view_names": ["mv_daily_trip_patterns"] },
    "NIGHT_END": { "event_categories": [], "view_names": ["mv_daily_trip_patterns"] },
    "LATE_NIGHT_START": { "event_categories": [], "view_names": ["mv_daily_trip_patterns"] },
    "LATE_NIGHT_END": { "event_categories": [], "view_names": ["mv_daily_trip_patterns"] },
    "MAX_DRIVING_HOURS": { "event_categories": ["Driving"], "view_names": ["mv_weekly_driver_scores"] },
    "MAX_DRIVING_DISTANCE": { "event_categories": ["Driving"], "view_names": ["mv_weekly_driver_scores"] },
    "REST_DURATION": { "event_categories": ["Driving"], "view_names": ["mv_weekly_driver_scores"] },
    "MIN_REST_DURATION": { "event_categories": ["Driving"], "view_names": ["mv_weekly_driver_scores"] },
    "DEVIATION_THRESHOLD": { "event_categories": ["Route"], "view_names": ["mv_trip_violations"] },
    "ENTRY_THRESHOLD": { "event_categories": ["Route"], "view_names": ["mv_trip_violations"] },
    "WAYPOINT_RADIUS": { "event_categories": ["Route"], "view_names": ["mv_trip_violations"] }
  },
  "materialized_views": [
    "mv_daily_mileage",
    "mv_daily_violations",
    "mv_hourly_vehicle_stats",
    "mv_daily_fuel_consumption",
    "mv_daily_temperature_compliance",
    "mv_daily_humidity_compliance",
    "mv_hourly_violations",
    "mv_daily_harsh_events",
    "mv_daily_compliance",
    "mv_daily_fence_stats",
    "mv_daily_stoppage_stats",
    "mv_daily_trip_patterns",
    "mv_daily_road_distance",
    "mv_maintenance_status",
    "mv_daily_fleet_status",
    "mv_weekly_driver_scores",
    "mv_daily_vehicle_scores",
    "mv_daily_camera_events",
    "mv_monthly_fleet_summary",
    "mv_transporter_summary",
    "mv_trip_violations",
    "mv_daily_fuel_summary",
    "mv_daily_client_analytics",
    "mv_daily_trends",
    "mv_trip_summary",
    "mv_hourly_violations_summary"
  ]
}
